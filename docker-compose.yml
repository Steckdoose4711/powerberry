version: "2.4"
services:
  powerberry-app:
    extends:
      file: docker-compose.prod.yml
      service: powerberry-app
    volumes:
      - ./powerberry-app:/app
      - ./config:/config

  # for dev, we use the container with sdk tools and bind mounts
  powerberry-dsp:
    extends:
      file: docker-compose.prod.yml
      service: powerberry-dsp
    build:
      context: ./powerberry-dsp
      target: dev
    volumes:
      - ./powerberry-dsp:/app
      - ./config:/config
    environment:
      EMULATE_HARDWARE: emu_hw_true    

  powerberry-redis:
    extends:
      file: docker-compose.prod.yml
      service: powerberry-redis
